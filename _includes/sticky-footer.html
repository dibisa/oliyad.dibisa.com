<footer class="sticky-footer" id="sticky-footer">
  <button class="footer-toggle" id="footer-toggle" aria-label="Toggle footer">
    <span class="footer-toggle-caret">â–¼</span>
  </button>
  
  <div class="footer-content">
    <!-- Column A: Photo -->
    <div class="footer-col footer-photo">
      {% if site.profile_image %}
      <img src="{{ site.profile_image }}" alt="Profile" class="footer-avatar">
      {% endif %}
    </div>

    <!-- Column B: Identity block -->
    <div class="footer-col footer-identity">
      <h4>{{ site.title }}</h4>
      <p><a href="mailto:{{ site.email }}">{{ site.email }}</a></p>
      <p class="signature-line">{{ site.signature_title }}</p>
      <p class="signature-line">{{ site.signature_affiliation }}</p>
      <p class="signature-line">{{ site.signature_location }}</p>
    </div>

    <!-- Column C: Social links -->
    <div class="footer-col footer-social">
      <h5>Profiles</h5>
      <div class="social-links">
        {% for link in site.minima.social_links %}
        <a href="{{ link.url }}" target="_blank" rel="noopener" title="{{ link.label }}">
          {{ link.label }}
        </a>
        {% endfor %}
      </div>
    </div>

    <!-- Column D: PhD summary -->
    <div class="footer-col footer-summary">
      <p>{{ site.phd_summary }}</p>
    </div>
  </div>
</footer>

<script>
  (function() {
    const footer = document.getElementById('sticky-footer');
    const toggle = document.getElementById('footer-toggle');
    const isMobile = window.innerWidth < 768;

    // Default collapsed on mobile
    if (isMobile) {
      footer.classList.add('collapsed');
    }

    // Toggle on click
    toggle.addEventListener('click', function() {
      footer.classList.toggle('collapsed');
      updateFooterHeight();
    });

    function updateFooterHeight() {
      const h = footer.offsetHeight;
      document.documentElement.style.setProperty('--footer-h', h + 'px');
    }

    // Update on load and resize
    window.addEventListener('load', updateFooterHeight);
    window.addEventListener('resize', updateFooterHeight);
    updateFooterHeight();
  })();
</script>
